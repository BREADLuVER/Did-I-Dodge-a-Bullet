"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6974:function(e,t,r){r.r(t),r.d(t,{default:function(){return o}});var s=r(7437),a=r(2265),n=r(720);let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,r=(0,a.useRef)(null);return(0,a.useCallback)(async function(){for(var s=arguments.length,a=Array(s),n=0;n<s;n++)a[n]=arguments[n];return r.current&&clearTimeout(r.current),new Promise((s,n)=>{r.current=setTimeout(async()=>{try{let t=await e(...a);s(t)}catch(e){n(e)}},t)})},[e,t])};var o=e=>{let{onCompanySelect:t,onSkip:r,className:o=""}=e,[i,c]=(0,a.useState)(""),[u,d]=(0,a.useState)([]),[m,x]=(0,a.useState)(!1),[h,b]=(0,a.useState)(!1),[p,f]=(0,a.useState)(-1),[y,g]=(0,a.useState)(""),v=(0,a.useRef)(null),j=(0,a.useRef)(null),w=l((0,a.useCallback)(async e=>{if(e.length<2){d([]),x(!1);return}x(!0),g("");try{console.log("\uD83D\uDD0D Searching for:",e);let t=await n.lj.searchCompanies(e,6),r=new Map;t.forEach(e=>{let t=(0,n.SY)(e.name);r.has(t)||r.set(t,e)});let s=Array.from(r.values());console.log("\uD83D\uDCCB Search results:",s),d(s)}catch(e){console.error("Search error:",e),g("Failed to search companies. Please try again.")}finally{x(!1)}},[]),200),N=e=>{c(e.name),d([]),b(!1),f(-1),t(e)},C=async()=>{i.trim()&&t(await n.lj.findOrCreateCompany(i.trim()))};return(0,a.useEffect)(()=>{let e=e=>{j.current&&!j.current.contains(e.target)&&v.current&&!v.current.contains(e.target)&&(b(!1),f(-1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.useEffect)(()=>()=>{},[]),(0,s.jsx)("div",{className:"relative ".concat(o),children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Enter Company Name"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"Get company-specific insights and compare your experience with others"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"Select from suggestions or type your own company name"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{ref:v,type:"text",value:i,onChange:e=>{let t=e.target.value;c(t),f(-1),b(!0),t.length<2?(d([]),x(!1)):w(t)},onKeyDown:e=>{if(h)switch(e.key){case"ArrowDown":e.preventDefault(),f(e=>e<u.length-1?e+1:e);break;case"ArrowUp":e.preventDefault(),f(e=>e>0?e-1:-1);break;case"Enter":e.preventDefault(),p>=0&&u[p]?N(u[p]):i.trim()&&C();break;case"Escape":var t;b(!1),f(-1),null===(t=v.current)||void 0===t||t.blur()}},onFocus:()=>b(!0),placeholder:"Start typing company name...",className:"w-full px-4 py-3 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",autoComplete:"off",autoFocus:!0}),m&&(0,s.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-500"})})]}),h&&(u.length>0||m)&&(0,s.jsx)("div",{ref:j,className:"relative z-50 w-full bg-white border border-gray-200 rounded-lg shadow-lg overflow-y-auto",style:{maxHeight:"200px"},children:m&&0===u.length?(0,s.jsxs)("div",{className:"px-4 py-3 text-gray-500 text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500 mx-auto mb-2"}),"Searching..."]}):u.map((e,t)=>(0,s.jsxs)("button",{onClick:()=>N(e),className:"w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors ".concat(t===p?"bg-blue-50 border-l-4 border-blue-500":""),children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.industry&&(0,s.jsx)("span",{children:e.industry})}),e.submissionCount>0&&(0,s.jsxs)("div",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:[e.submissionCount," submission",1!==e.submissionCount?"s":""]})]})]},e.id))}),y&&(0,s.jsx)("div",{className:"text-red-500 text-sm text-center",children:y}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,s.jsx)("button",{onClick:C,disabled:!i.trim(),className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Use This Name"}),(0,s.jsx)("button",{onClick:r,className:"flex-1 bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 transition-colors",children:"Skip for Anonymous"})]}),(0,s.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-sm text-blue-800",children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Why enter a company name?"}),(0,s.jsxs)("ul",{className:"space-y-1",children:[(0,s.jsx)("li",{children:"• Compare your experience with others at the same company"}),(0,s.jsx)("li",{children:"• See common red flags patterns for this company"}),(0,s.jsx)("li",{children:"• Help future candidates make informed decisions"}),(0,s.jsx)("li",{children:"• Contribute to workplace transparency"})]})]})]})})}}}]);