"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[352],{3352:function(e,s,t){t.r(s);var l=t(7437),a=t(2265),r=t(720),i=t(1353),n=t(2894),d=t(6141),c=t(3067),x=t(8253),m=t(2457),o=t(5790),u=t(7810),h=t(5750),g=t(9670);s.default=e=>{var s,t,v,N;let{companyName:j,onBack:b}=e,[p,y]=(0,a.useState)(null),[f,w]=(0,a.useState)(!0);(0,a.useEffect)(()=>{w(!0),r.lj.refreshCompanies().then(()=>r.lj.searchCompanies(j,1)).then(e=>{y(e[0]||null),w(!1)})},[j]);let Z=(0,a.useMemo)(()=>(null==p?void 0:p.commonFlags)&&0!==p.commonFlags.length?Object.entries(p.commonFlags.reduce((e,s)=>(e[s]=(e[s]||0)+1,e),{})).map(e=>{let[s,t]=e,l=i.Y.find(e=>e.id===s);return l?{...l,count:t}:null}).filter(e=>!!e).sort((e,s)=>((null==s?void 0:s.count)||0)-((null==e?void 0:e.count)||0)).slice(0,3):[],[p]),k=e=>{switch(e){case"medium":return"border-orange-500 bg-orange-50";case"light":return"border-yellow-500 bg-yellow-50";default:return"border-gray-500 bg-gray-50"}},C=e=>{switch(e){case"medium":return(0,l.jsx)(n.Z,{className:"w-4 h-4 text-orange-600"});case"light":return(0,l.jsx)(d.Z,{className:"w-4 h-4 text-yellow-600"});default:return(0,l.jsx)(n.Z,{className:"w-4 h-4 text-gray-600"})}};return(0,l.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,l.jsxs)("button",{onClick:b,className:"mb-6 flex items-center text-blue-600 hover:underline",children:[(0,l.jsx)(c.Z,{className:"w-5 h-5 mr-2"})," Back to Results"]}),(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold mb-6 text-gray-900 flex items-center",children:[(0,l.jsx)(x.Z,{className:"w-7 h-7 text-orange-500 mr-3"}),j]}),f?(0,l.jsx)("div",{className:"text-gray-500 mt-4",children:"Loading insights..."}):p?(0,l.jsxs)("div",{className:"space-y-8",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,l.jsx)(m.Z,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),(0,l.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:p.submissionCount||0}),(0,l.jsx)("div",{className:"text-sm text-blue-700",children:"Checkups Submitted"})]}),(0,l.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[(0,l.jsx)(o.Z,{className:"w-8 h-8 text-purple-500 mx-auto mb-2"}),(0,l.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:(null===(s=p.averageFlagCount)||void 0===s?void 0:s.toFixed(1))||"0.0"}),(0,l.jsx)("div",{className:"text-sm text-purple-700",children:"Avg Flags per Checkup"})]}),(0,l.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 text-center",children:[(0,l.jsx)(u.Z,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),(0,l.jsx)("div",{className:"text-2xl font-bold text-red-600",children:(null===(t=p.severityTrends)||void 0===t?void 0:t.medium)||0}),(0,l.jsx)("div",{className:"text-sm text-red-700",children:"Medium Severity Flags"})]})]}),Z.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,l.jsx)(h.Z,{className:"w-5 h-5 text-green-500 mr-2"}),"Most Common Red Flags"]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Z.map((e,s)=>(0,l.jsxs)("div",{className:"border-2 rounded-lg p-4 ".concat(k((null==e?void 0:e.severity)||"light")),children:[(0,l.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,l.jsxs)("span",{className:"text-xs font-semibold text-gray-600 bg-white px-2 py-1 rounded",children:["#",s+1," â€¢ ",null==e?void 0:e.count," time",(null==e?void 0:e.count)!==1?"s":""]}),C((null==e?void 0:e.severity)||"light")]}),(0,l.jsx)("p",{className:"text-gray-800 font-medium text-sm mb-2",children:null==e?void 0:e.text}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[(0,l.jsx)("span",{className:"capitalize",children:null==e?void 0:e.category}),(0,l.jsx)("span",{className:"capitalize",children:null==e?void 0:e.severity})]})]},null==e?void 0:e.id))})]}),(0,l.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Severity Breakdown"}),(0,l.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"w-4 h-4 bg-yellow-500 rounded-full"}),(0,l.jsxs)("span",{className:"text-sm text-gray-700",children:["Light: ",(null===(v=p.severityTrends)||void 0===v?void 0:v.light)||0]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"w-4 h-4 bg-orange-500 rounded-full"}),(0,l.jsxs)("span",{className:"text-sm text-gray-700",children:["Medium: ",(null===(N=p.severityTrends)||void 0===N?void 0:N.medium)||0]})]})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-3 text-sm text-gray-600",children:[(0,l.jsx)(g.Z,{className:"w-4 h-4"}),(0,l.jsxs)("span",{children:["Last updated: ",(e=>{if(!e)return"N/A";try{let s;if(s=e.seconds?new Date(1e3*e.seconds):e.toDate?e.toDate():new Date(e),isNaN(s.getTime()))return"N/A";return s.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(e){return console.error("Error formatting date:",e),"N/A"}})(p.lastSubmission)]})]})]}):(0,l.jsx)("div",{className:"text-gray-500 mt-4",children:(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)(x.Z,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"No insights available yet"}),(0,l.jsxs)("p",{className:"text-gray-500",children:["Be the first to submit a checkup for ",j,"!"]})]})})]})]})}}}]);